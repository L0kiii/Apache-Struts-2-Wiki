    

<!DOCTYPE html>
<html lang="zh-CN">
<head>
                            <title>StrutsCatalogMultipleButtonSolutions - Apache Struts 2 Wiki - Apache Software Foundation</title>
    
        

                        
    
                        
    

                
    
    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="/confluence">
<meta id="confluence-base-url" name="confluence-base-url" content="https://cwiki.apache.org/confluence">

    <meta id="atlassian-token" name="atlassian-token" content="5ec21180963b124e3e7fa7d162eb5fff1abe99d5">


<meta id="confluence-space-key" name="confluence-space-key" content="WW">
<script type="text/javascript">
        var contextPath = '/confluence';
</script>

    

    <meta name="confluence-request-time" content="1595840032044">
        
    
        
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            <script type="text/x-template" title="gliffy-webpanel-footer">
        <div class="gliffy-webpanel-footer"><span>This Confluence installation runs a Free Gliffy License - Evaluate the <a href="http://www.gliffy.com/products/confluence-plugin/">Gliffy Confluence Plugin</a> for your Wiki!</span></div>
</script>


            <style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.ia-fixed-sidebar {visibility: hidden;}</style>
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="ajs-keyboardshortcut-hash" content="244b3b2851a4a758ccc0304672ffd8c1">
            
    
    
            <meta name="ajs-page-title" content="StrutsCatalogMultipleButtonSolutions">
            <meta name="ajs-latest-published-page-title" content="StrutsCatalogMultipleButtonSolutions">
            <meta name="ajs-space-name" content="Apache Struts 2 Wiki">
            <meta name="ajs-page-id" content="120724388">
            <meta name="ajs-latest-page-id" content="120724388">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-parent-page-title" content="Home">
            <meta name="ajs-parent-page-id" content="14153">
            <meta name="ajs-space-key" content="WW">
            <meta name="ajs-max-number-editors" content="12">
            <meta name="ajs-macro-placeholder-timeout" content="5000">
            <meta name="ajs-jira-metadata-count" content="-1">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-can-remove-page-hierarchy" content="false">
            <meta name="ajs-browse-page-tree-mode" content="view">
            <meta name="ajs-shared-drafts" content="true">
            <meta name="ajs-context-path" content="/confluence">
            <meta name="ajs-base-url" content="https://cwiki.apache.org/confluence">
            <meta name="ajs-version-number" content="7.5.0">
            <meta name="ajs-build-number" content="8501">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-remote-user-has-licensed-access" content="false">
            <meta name="ajs-remote-user-has-browse-users-permission" content="false">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-current-user-avatar-uri-reference" content="/confluence/images/icons/profilepics/anonymous.svg">
            <meta name="ajs-static-resource-url-prefix" content="/confluence/s/962fig/8501/fded9f91818631c3677be93247bf5ae6723a1c8d/_">
            <meta name="ajs-global-settings-attachment-max-size" content="20971520">
            <meta name="ajs-global-settings-quick-search-enabled" content="true">
            <meta name="ajs-user-locale" content="zh_CN">
            <meta name="ajs-enabled-dark-features" content="site-wide.shared-drafts,site-wide.synchrony,clc.quick.create,confluence.view.edit.transition,cql.search.screen,confluence-inline-comments-resolved,http.session.registrar,frontend.editor.v4,nps.survey.inline.dialog,confluence.efi.onboarding.new.templates,frontend.editor.v4.compatibility,atlassian.cdn.static.assets,pdf-preview,previews.sharing,previews.versions,file-annotations,collaborative-audit-log,confluence.efi.onboarding.rich.space.content,previews.conversion-service,editor.ajax.save,graphql,read.only.mode,previews.trigger-all-file-types,lucene.caching.filter,attachment.extracted.text.extractor,confluence.table.resizable,notification.batch,previews.sharing.pushstate,confluence-inline-comments-rich-editor,site-wide.synchrony.opt-in,file-annotations.likes,gatekeeper-ui-v2,v2.content.name.searcher,mobile.supported.version,pulp,confluence-inline-comments,quick-reload-inline-comments-flags,confluence-inline-comments-dangling-comment">
            <meta name="ajs-atl-token" content="5ec21180963b124e3e7fa7d162eb5fff1abe99d5">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="yyyy-M-d">
            <meta name="ajs-access-mode" content="READ_WRITE">
            <meta name="ajs-render-mode" content="READ_WRITE">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    
    

<link rel="search" type="application/opensearchdescription+xml" href="/confluence/opensearch/osd.action" title="Apache Software Foundation">
    
                    
            <meta name="ajs-create-issue-metadata-show-discovery" content="false">
            

    <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\u0022\u005C/confluence\u0022";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources.test-mode"]="false";
WRM._unparsedData["com.atlassian.confluence.plugins.synchrony-interop:synchrony-status-banner-loader.synchrony-status"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.applinks-help-paths"]="{\u0022entries\u0022:{\u0022applinks.docs.root\u0022:\u0022https://confluence.atlassian.com/display/APPLINKS-060/\u0022,\u0022applinks.docs.diagnostics.troubleshoot.sslunmatched\u0022:\u0022SSL+and+application+link+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthsignatureinvalid\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthtimestamprefused\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.delete.entity.link\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.adding.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.administration.guide\u0022:\u0022Application+Links+Documentation\u0022,\u0022applinks.docs.oauth.security\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.troubleshoot.application.links\u0022:\u0022Troubleshoot+application+links\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unknownerror\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.trusted.apps\u0022:\u0022Configuring+Trusted+Applications+authentication+for+an+application+link\u0022,\u0022applinks.docs.diagnostics.troubleshoot.authlevelunsupported\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.ssluntrusted\u0022:\u0022SSL+and+application+link+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unknownhost\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.delete.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.link.applications\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthproblem\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.migration\u0022:\u0022Update+application+links+to+use+OAuth\u0022,\u0022applinks.docs.relocate.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.administering.entity.links\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.upgrade.application.link\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.diagnostics.troubleshoot.connectionrefused\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.oauth\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.insufficient.remote.permission\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.configuring.application.link.auth\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.diagnostics\u0022:\u0022Application+links+diagnostics\u0022,\u0022applinks.docs.configured.authentication.types\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.adding.entity.link\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unexpectedresponse\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.basic\u0022:\u0022Configuring+Basic+HTTP+Authentication+for+an+Application+Link\u0022,\u0022applinks.docs.diagnostics.troubleshoot.authlevelmismatch\u0022:\u0022OAuth+troubleshooting+guide\u0022}}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.applinks-types"]="{\u0022crowd\u0022:\u0022\u4eba\u7fa4\u0022,\u0022confluence\u0022:\u0022Confluence\u0022,\u0022fecru\u0022:\u0022Fisheye / Crucible\u0022,\u0022stash\u0022:\u0022\u6682\u5b58\u0022,\u0022jira\u0022:\u0022Jira\u0022,\u0022refapp\u0022:\u0022\u76f8\u5173\u5e94\u7528\u7a0b\u5e8f\u0022,\u0022bamboo\u0022:\u0022\u7af9\u0022,\u0022generic\u0022:\u0022\u901a\u7528\u5e94\u7528\u7a0b\u5e8f\u0022}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.entity-types"]="{\u0022singular\u0022:{\u0022refapp.charlie\u0022:\u0022Charlie\u0022,\u0022fecru.project\u0022:\u0022Crucible\u9879\u76ee\u0022,\u0022fecru.repository\u0022:\u0022FishEye \u4ed3\u5e93\u0022,\u0022stash.project\u0022:\u0022Stash \u9879\u76ee\u0022,\u0022generic.entity\u0022:\u0022\u901a\u7528\u9879\u76ee\u0022,\u0022confluence.space\u0022:\u0022Confluence\u7a7a\u95f4\u0022,\u0022bamboo.project\u0022:\u0022Bamboo\u9879\u76ee\u0022,\u0022jira.project\u0022:\u0022Jira \u9879\u76ee\u0022},\u0022plural\u0022:{\u0022refapp.charlie\u0022:\u0022\u67e5\u7406\u65af\u0022,\u0022fecru.project\u0022:\u0022Crucible\u9879\u76ee\u0022,\u0022fecru.repository\u0022:\u0022FishEye \u4ed3\u5e93\u96c6\u0022,\u0022stash.project\u0022:\u0022Stash\u9879\u76ee\u0022,\u0022generic.entity\u0022:\u0022\u901a\u7528\u9879\u76ee\u0022,\u0022confluence.space\u0022:\u0022Confluence\u7a7a\u95f4\u0022,\u0022bamboo.project\u0022:\u0022Bamboo\u9879\u76ee\u0022,\u0022jira.project\u0022:\u0022Jira \u9879\u76ee\u0022}}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.authentication-types"]="{\u0022com.atlassian.applinks.api.auth.types.BasicAuthenticationProvider\u0022:\u0022\u57fa\u672c\u8bbf\u95ee\u0022,\u0022com.atlassian.applinks.api.auth.types.TrustedAppsAuthenticationProvider\u0022:\u0022\u4fe1\u4efb\u7684\u5e94\u7528\u65e0\u6548\u0022,\u0022com.atlassian.applinks.api.auth.types.CorsAuthenticationProvider\u0022:\u0022\u6b4c\u73e5\u0022,\u0022com.atlassian.applinks.api.auth.types.OAuthAuthenticationProvider\u0022:\u0022Oauth\u0022,\u0022com.atlassian.applinks.api.auth.types.TwoLeggedOAuthAuthenticationProvider\u0022:\u0022Oauth\u0022,\u0022com.atlassian.applinks.api.auth.types.TwoLeggedOAuthWithImpersonationAuthenticationProvider\u0022:\u0022Oauth\u0022}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details"]="{\u0022daysBeforeLicenseExpiry\u0022:0,\u0022daysBeforeMaintenanceExpiry\u0022:0,\u0022showLicenseExpiryBanner\u0022:false,\u0022showMaintenanceExpiryBanner\u0022:false,\u0022renewUrl\u0022:null,\u0022salesUrl\u0022:null}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-search-ui-plugin:confluence-search-ui-plugin-resources.i18n-data"]="{\u0022search.ui.recent.link.text\u0022:\u0022\u67e5\u770b\u66f4\u591a\u6700\u8fd1\u8bbf\u95ee\u0022,\u0022search.ui.filter.space.category.input.label\u0022:\u0022\u67e5\u627e\u7a7a\u95f4\u7c7b\u522b\u2026\u2026\u0022,\u0022search.ui.filter.clear.selected\u0022:\u0022\u6e05\u9664\u6240\u9009\u9879\u76ee\u0022,\u0022search.ui.search.results.empty\u0022:\u0022\u6211\u4eec\u627e\u4e0d\u5230\u4efb\u4f55\u5339\u914d\u201c{0}\u201d\u7684\u5185\u5bb9\u3002\u0022,\u0022search.ui.content.name.search.items.panel.load.all.top.items.button.text\u0022:\u0022\u663e\u793a\u66f4\u591a\u5e94\u7528\u7ed3\u679c......\u0022,\u0022search.ui.filter.space.archive.label\u0022:\u0022\u641c\u7d22\u5df2\u7ecf\u5f52\u6863\u7684\u7a7a\u95f4\u0022,\u0022search.ui.filter.label\u0022:\u0022\u7b5b\u9009\u5668\u0022,\u0022search.ui.filter.contributor.button.text\u0022:\u0022\u8d21\u732e\u8005\u0022,\u0022search.ui.filter.date.all.text\u0022:\u0022\u968f\u65f6\u0022,\u0022search.ui.filter.space.current.label\u0022:\u0022\u5f53\u524d\u0022,\u0022search.ui.clear.input.button.text\u0022:\u0022\u6e05\u9664\u6587\u672c\u0022,\u0022help.search.ui.link.title\u0022:\u0022\u641c\u7d22\u6280\u5de7\u0022,\u0022search.ui.search.results.clear.button\u0022:\u0022\u6e05\u7a7a\u7b5b\u9009\u5668\u3002\u0022,\u0022search.ui.filter.date.hour.text\u0022:\u0022\u8fc7\u53bb\u4e00\u5929\u0022,\u0022search.ui.filters.heading\u0022:\u0022\u7b5b\u9009\u65b9\u5f0f\u0022,\u0022search.ui.filter.label.input.label\u0022:\u0022\u67e5\u627e\u6807\u7b7e\u2026\u2026\u0022,\u0022search.ui.filter.date.month.text\u0022:\u0022\u8fc7\u53bb\u4e00\u4e2a\u6708\u0022,\u0022search.ui.recent.items.anonymous\u0022:\u0022\u5f00\u59cb\u63a2\u7d22\u3002 \u60a8\u7684\u641c\u7d22\u7ed3\u679c\u5c06\u663e\u793a\u5728\u6b64\u5904\u3002\u0022,\u0022search.ui.input.label\u0022:\u0022\u641c\u7d22\u0022,\u0022search.ui.search.result\u0022:\u0022{0,choice,1#{0}\u4e2a\u641c\u7d22\u7ed3\u679c|1\u005Cu003c{0}\u4e2a\u641c\u7d22\u7ed3\u679c}\u0022,\u0022search.ui.infinite.scroll.button.text\u0022:\u0022\u66f4\u591a\u7ed3\u679c\u0022,\u0022search.ui.filter.date.button.text\u0022:\u0022\u65e5\u671f\u0022,\u0022search.ui.filter.date.week.text\u0022:\u0022\u8fc7\u53bb\u4e00\u5468\u0022,\u0022search.ui.filter.label.button.text\u0022:\u0022\u6807\u7b7e\u0022,\u0022search.ui.input.alert\u0022:\u0022\u6309\u56de\u8f66\u952e(Enter)\u641c\u7d22\u0022,\u0022search.ui.filter.no.result.text\u0022:\u0022\u6211\u4eec\u627e\u4e0d\u5230\u4efb\u4f55\u7b26\u5408\u60a8\u641c\u7d22\u6761\u4ef6\u7684\u5185\u5bb9\u0022,\u0022search.ui.result.subtitle.calendar\u0022:\u0022\u56e2\u961f\u65e5\u7a0b\u8868\u0022,\u0022search.ui.filter.date.heading\u0022:\u0022\u4e0a\u6b21\u4fee\u6539\u0022,\u0022search.ui.result.subtitle.user\u0022:\u0022\u7528\u6237\u8d44\u6599\u0022,\u0022search.ui.filter.contributor.input.label\u0022:\u0022\u67e5\u627e\u4eba\u5458\u2026\u2026\u0022,\u0022search.ui.filter.content.type.button.text\u0022:\u0022\u7c7b\u578b\u0022,\u0022search.ui.filter.space.input.label\u0022:\u0022\u67e5\u627e\u7a7a\u95f4\u0022,\u0022search.ui.filter.date.year.text\u0022:\u0022\u8fc7\u53bb\u4e00\u5e74\u0022,\u0022search.ui.filter.space.button.text\u0022:\u0022\u7a7a\u95f4\u0022,\u0022search.ui.advanced.search.link.text\u0022:\u0022\u9ad8\u7ea7\u641c\u7d22\u0022,\u0022search.ui.generic.error\u0022:\u0022\u51fa\u9519\u4e86\u3002\u5237\u65b0\u9875\u9762\uff0c\u6216\u8005\u5982\u679c\u6301\u7eed\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u8bf7\u8054\u7cfb\u60a8\u7684\u7ba1\u7406\u5458\u3002\u0022,\u0022search.ui.recent.spaces\u0022:\u0022\u6700\u8fd1\u7a7a\u95f4\u0022,\u0022search.ui.search.results.clear.line2\u0022:\u0022\u8bf7\u5c1d\u8bd5\u4e0d\u540c\u7684\u641c\u7d22\u5173\u952e\u5b57\u6216\u8005\u0022,\u0022search.ui.filter.space.category.button.text\u0022:\u0022\u7a7a\u95f4\u7c7b\u522b\u0022,\u0022search.ui.search.results.clear.line1\u0022:\u0022\u627e\u4e0d\u5230\u5339\u914d\u7684\u641c\u7d22\u7ed3\u679c\u0022,\u0022search.ui.content.name.search.items.panel.load.all.top.items.admin.button.text\u0022:\u0022\u663e\u793a\u66f4\u591a\u8bbe\u7f6e\u548c\u5e94\u7528\u7ed3\u679c...\u0022,\u0022search.ui.recent.pages\u0022:\u0022\u6700\u8fd1\u8bbf\u95ee\u0022,\u0022search.ui.search.result.anonymous\u0022:\u0022{0,choice,1#{0}\u4e2a\u641c\u7d22\u7ed3\u679c| 1 \u005Cu003c{0}\u4e2a\u641c\u7d22\u7ed3\u679c}\u3002 \u60a8\u6709\u5e10\u6237\u5417\uff1f{1}\u767b\u5f55{2}\u641c\u7d22\u66f4\u591a\u7ed3\u679c\u3002\u0022,\u0022search.ui.recent.items.empty\u0022:\u0022\u5f00\u59cb\u63a2\u7d22\u3002 \u60a8\u6700\u8fd1\u8bbf\u95ee\u8fc7\u7684\u9875\u9762\u548c\u7a7a\u95f4\u5c06\u663e\u793a\u5728\u6b64\u5904\u3002\u0022,\u0022search.ui.result.subtitle.space\u0022:\u0022\u7a7a\u95f4\u0022,\u0022search.ui.filter.space.init.heading\u0022:\u0022\u6700\u8fd1\u7a7a\u95f4\u0022}";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script>
<link type="text/css" rel="stylesheet" href="static/css/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all">
<link type="text/css" rel="stylesheet" href="static/css/batch-true_true_true.css" data-wrm-key="atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments,-_super" data-wrm-batch-type="context" media="all">
<script type="text/javascript" src="static/js/batch-zh-CN.js" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered=""></script>
<script type="text/javascript" src="static/js/batch-true_true_true_zh-CN.js" data-wrm-key="atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments,-_super" data-wrm-batch-type="context" data-initially-rendered=""></script>

    

        
    

        
        <meta name="ajs-site-title" content="Apache Software Foundation">
            
    

    
                <link rel="canonical" href="">
        <link rel="shortlink" href="https://cwiki.apache.org/confluence/x/pBsyBw">
    <meta name="wikilink" content="[WW:StrutsCatalogMultipleButtonSolutions]">
    <meta name="page-version" content="1">
    <meta name="ajs-page-version" content="1">

</head>

    
<body id="com-atlassian-confluence" class="theme-default  aui-layout aui-theme-default">

        
            <div id='stp-licenseStatus-banner'></div>
    <ul id="assistive-skip-links" class="assistive">
    <li><a href="#title-heading">转至内容</a></li>
    <li><a href="#breadcrumbs">转至导航栏</a></li>
    <li><a href="#header-menu-bar">转至主菜单</a></li>
    <li><a href="#navigation">转至动作菜单</a></li>
    <li><a href="#quick-search-query">转至快速搜索</a></li>
</ul>
<div id="page">
<div id="full-height-container">
    <div id="header-precursor">
        <div class="cell">
            
                            </div>
    </div>
        





<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-before"><a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger="" href="#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">已链接应用程序</span></a><div id="app-switcher" class="aui-dropdown2 aui-style-default" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}"><div role="application"><div class="app-switcher-loading">正在上传和乱码；</div></div></div></div><div class="aui-header-primary"><h1 id="logo" class="aui-header-logo aui-header-logo-confluence"><a href="index.html"><span class="aui-header-logo-device">Apache Software Foundation</span></a></h1><ul class="aui-nav">
                            <li>
            
        
        
<a id="space-directory-link" href="view.html" class=" aui-nav-imagelink" title="空间">
            <span>空间</span>
    </a>
        </li>
                                <li class="aui-buttons">
            </li>
</ul>
</div><div class="aui-header-secondary"><ul class="aui-nav">
                        <li>
        <div id="search-ui" class="aui-quicksearch dont-default-focus header-quicksearch"><input id="quick-search-query" aria-label="搜索" placeholder="搜索" type="text"><div id="quick-search-alert" role="alert">按回车键(Enter)搜索</div><aui-spinner size="small"></aui-spinner></div>
    </li>
        <li>
            
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger aui-dropdown2-trigger-arrowless" href="#" aria-haspopup="true" aria-owns="help-menu-link-content" title="帮助">
        <span class="aui-icon aui-icon-small aui-iconfont-question-filled">帮助</span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
        
            
<a id="confluence-help-link" href="javascript:;" class="    " title="访问Confluence文档首页" target="_blank">
        在线帮助
</a>
</li>
                                            <li>
    
            
<a id="keyboard-shortcuts-link" href="confluence.html" class="    " title="查看可用的键盘快捷方式">
        快捷键
</a>
</li>
                                            <li>
    
            
<a id="feed-builder-link" href="configurerssfeed.html" class="    " title="创建个性化的 RSS源。">
        RSS源建立器
</a>
</li>
                                            <li>
    
            
<a id="whats-new-menu-link" href="javascript:;" class="    " title="">
        新功能
</a>
</li>
                                            <li>
    
            
<a id="gadget-directory-link" href="confluence.html" class="   user-item administration-link " title="浏览小工具">
        可用的小工具
</a>
</li>
                                            <li>
    
            
<a id="confluence-about-link" href="aboutconfluencepage.html" class="    " title="获取关于Confluence的更多信息">
        关于Confluence
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
    </li>
        <li>
                
    
    </li>
        <li>
            
    </li>
        <li>
                                            <li>
        
            
<a id="login-link" href="javascript:;" class="   user-item login-link " title="">
        登录
</a>
</li>
                        <li>
    
            
<a id="signup-link" href="signup.html" class="   user-item signup-link " title="">
        注册
</a>
</li>
                        
    
    </ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>
    

    
    	<div class="ia-splitter">
    		<div class="ia-splitter-left">
    			<div class="ia-fixed-sidebar">
                                            
                            <div class="acs-side-bar ia-scrollable-section"><div class="acs-side-bar-space-info tipsy-enabled" data-configure-tooltip="编辑空间详情"><div class="avatar"><div class="space-logo" data-key="WW" data-name="Apache Struts 2 Wiki" data-entity-type="confluence.space"><div class="avatar-img-container"><div class="avatar-img-wrapper"><a href="home.html" title="Apache Struts 2 Wiki"><img class="avatar-img" src="static/picture/default-space-logo.svg" alt="Apache Struts 2 Wiki"></a></div></div></div></div><div class="space-information-container"><div class="name"><a href="home.html" title="Apache Struts 2 Wiki">Apache Struts 2 Wiki</a></div><div class="flyout-handle icon aui-icon aui-icon-small aui-iconfont-edit"></div></div></div><div class="acs-side-bar-content"><div class="acs-nav-wrapper"><div class="acs-nav" data-has-create-permission="false" data-quick-links-state="null" data-page-tree-state="null" data-nav-type="pages"><div class="acs-nav-sections"><div class="quick-links-wrapper"></div></div></div></div><div class="ia-secondary-container tipsy-enabled" data-tree-type="pages"><div class="ia-secondary-header"><h5 class="ia-secondary-header-title pages"><span class="label">子页面</span></h5></div><div class="ia-secondary-parent-content"><ul class="parent ia-secondary-header-title wiki"><li class="parent-item"><a class="parent-item-link" href="home.html" title="Home"><span class="icon"></span><span class="label">Home</span></a></li></ul></div><div class="ia-secondary-current-content"><ul class="ia-secondary-currentPage-title wiki current-item"><li><span class="icon"></span><span class="label">StrutsCatalogMultipleButtonSolutions</span></li></ul></div><div class="ia-secondary-content"><div class="contextual-nav-child-pages"></div></div></div></div><div class="hidden"><a href="pages-ww.html" id="space-pages-link"></a><script type="text/x-template" title="logo-config-content"><h2>空间详情</h2><div class="personal-space-logo-hint">您的个人头像被作为您的个人空间的logo使用。<a href="/confluence/users/profile/editmyprofilepicture.action" target="_blank">更改您的个人头像</a>.</div></script></div></div><div class="space-tools-section"><div id="space-tools-menu-additional-items" class="hidden"><div data-label="浏览页面" data-class="" data-href="/confluence/pages/reorderpages.action?key=WW">浏览页面</div></div><button id="space-tools-menu-trigger" class=" aui-dropdown2-trigger aui-button aui-button-subtle tipsy-enabled aui-dropdown2-trigger-arrowless " aria-controls="space-tools-menu" aria-haspopup="true" role="button" data-aui-trigger=""><span class="aui-icon aui-icon-small aui-iconfont-configure">设置</span><span class="aui-button-label">空间管理</span><span class="aui-icon "></span></button><div id="space-tools-menu" class="aui-dropdown2 aui-style-default space-tools-dropdown" role="menu" aria-hidden="true" data-aui-alignment="top left"><div role="application"></div></div><a class="expand-collapse-trigger aui-icon aui-icon-small aui-iconfont-chevron-double-left"></a></div>
                    
                        			</div>
    		</div>
        <!-- \#header -->

            
    
        <div id="main" class=" aui-page-panel">
                        <div id="main-header">
                        
    <div id="navigation" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                            
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action aui-dropdown2-trigger-arrowless aui-button aui-button-subtle ajs-menu-title aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-label="更多选项" aria-owns="action-menu" data-container="#navigation">
            <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-more" aria-label="更多选项"></span>
                                
            </span>
        </a>         <div id="action-menu" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                            <div class="aui-dropdown2-section">
                    <ul id="action-menu-primary" class="section-primary first">
                                                    <li>

    
        
    
                                                        
    
    
            <a id="view-attachments-link" href="javascript:;" rel="nofollow" class="action-view-attachments" accesskey="t" title="查看附件">
                        <span>
                                <u>t</u>附件(0)
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-view-history-link" href="javascript:;" rel="nofollow" class="action-view-history" title="">
                        <span>
                                页面历史
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="who-can-view-button-ak-button" href="confluence.html" rel="nofollow" class="who-can-view-link" title="">
                        <span>
                                可以查看的人
            </span>        </a>
    </li>
                                        </ul>
                </div>
                            <div class="aui-dropdown2-section">
                    <ul id="action-menu-secondary" class="section-secondary">
                                                    <li>

    
        
    
                                                        
    
    
            <a id="view-resolved-comments" href="confluence.html" rel="nofollow" class="" title="">
                        <span>
                                已解决评论
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="view-page-info-link" href="javascript:;" rel="nofollow" class="action-view-info" title="">
                        <span>
                                页面信息
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="view-in-hierarchy-link" href="javascript:;" rel="nofollow" class="" title="">
                        <span>
                                以层级方式查看
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-view-source-link" href="javascript:;" rel="nofollow" class="action-view-source popup-link" title="">
                        <span>
                                查看页面源代码
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="delete-all-comments-link-link" href="javascript:;" rel="nofollow" class="" title="">
                        <span>
                                Delete comments
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-export-pdf-link" href="javascript:;" rel="nofollow" class="" title="">
                        <span>
                                导出为PDF
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="com-k15t-confluence-scroll-epub-launcher" href="javascript:;" rel="nofollow" class="" title="">
                        <span>
                                Export to EPUB
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-export-word-link" href="javascript:;" rel="nofollow" class="action-export-word" title="">
                        <span>
                                导出为Word
            </span>        </a>
    </li>
                                        </ul>
                </div>
                    </div>
    </li>
            </ul>
    </div>

            
            <div id="title-heading" class="pagetitle with-breadcrumbs">
                
                                    <div id="breadcrumb-section">
                        
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first">
                        
                            <span class=""><a href="pages-ww.html">页面</a></span>
                                                                                    
                        
        <li>
                        
                            <span class=""><a href="home.html">Home</a></span>
                                                                    </li></ol>


                    </div>
                
                
        <a href="#page-banner-end" class="assistive">跳到banner的尾部</a>
<div id="page-banner-start" class="assistive"></div>

                    
            <div id="page-metadata-banner"><ul class="banner"><li id="system-content-items" class="noprint"><a href="" title="未限制" id="content-metadata-page-restrictions-hidden" class="hidden"></a></li><li class="page-metadata-item noprinthas-button" id="content-metadata-jira-wrapper"><a href="" title="" id="content-metadata-jira" class="aui-button aui-button-subtle content-metadata-jira tipsy-disabled hidden"><span>JIRA 链接</span></a></li></ul></div>
            

<a href="#page-banner-start" class="assistive">回到标题开始</a>
<div id="page-banner-end" class="assistive"></div>
    

                <h1 id="title-text" class="with-breadcrumbs">
                                                <a href="">StrutsCatalogMultipleButtonSolutions</a>
                                    </h1>
            </div>
        </div><!-- \#main-header -->
        
        

        <div id="sidebar-container">
                                                </div><!-- \#sidebar-container -->

        
    

        




            
    

                                
    

    
    
        
    
    
                    
    

    

    
            
        

    
    

    
            
        



    
<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



            <script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">页面标题</th>
                <th class="search-result-space">空间</th>
                <th class="search-result-date">更新于</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <td class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></td>
        <td class="search-result-space"><a class="space" href="/confluence/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
        
    
            

        
                            
    

                    

        
        <a href="#page-metadata-end" class="assistive">转至元数据结尾</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
            <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            由<span class='author'>     <a href="javascript:;" class="url fn">ASF Infrabot</a></span>创建于<a class='last-modified' title='查看变更' href='javascript:;'>七月 01, 2019</a>
                </li>
        </ul>
    </div>


<a href="#page-metadata-start" class="assistive">转至元数据起始</a>
<div id="page-metadata-end" class="assistive"></div>

        
                                            
        <div id="main-content" class="wiki-content">
                           
        
<p>This presentation is somewhat detailed, so we begin with a Table of Contents for your ease in navigating the presentation.  Enjoy!  There is a comment section at the very end.</p>

<h2 id="StrutsCatalogMultipleButtonSolutions-TableofContents">Table of Contents</h2>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>1     Table of Contents
2     PROBLEM: Universal Button Solutions: --------------- PROBLEM
      SOLUTIONS: ----------------------------------------- SOLUTIONS
      I.   Action Solution
             A.   DispatchUtil (SOLUTION ONE)
             B.  (new) DispatchAction (SOLUTION TWO)
      II.  Non-Struts Solution
             ButtonTagUtil (SOLUTION THREE)
      III. ActionForm Solution
             ButtonForm (SOLUTION FOUR)
      IV.  Button Solution
             Button (SOLUTION FIVE)
3     Tag Uses
3.1   Action Class Code
3.2   Mulitiple Image Tags
3.3   Link Tags
3.4   Submit Tags
3.5   File Browse Tags
3.6   Button Tags
3.7   struts-config.xml Uses
3.7.1 MappingDispatchAction
3.7.2 LookupDispatchAction
4     SOLUTION ONE: DispatchUtil Code -------------------- SOLUTION ONE
5     (new) DispatchAction
5.1   Discussion
5.2   SOLUTION TWO: (new) DispatchAction Code ------------ SOLUTION TWO
6     PAO (Plain Actino Object): Solution for Tags without Dispatch, without Reflection, without ActionMapping or Even without Struts
6.1   Discussion
6.2   SOLUTION THREE: ButtonTagUtil Code ----------------- SOLUTION THREE
7.    ButtonForm
7.1   Discussion
7.2   SOLUTION FOUR: ButtonForm Code --------------------- SOLUTION FOUR
8.    Button
8.1   Discussion
8.2   SOLUTION FIVE: Button Code ------------------------- SOLUTION FIVE
9     Links
10    Comments (Peanut Gallery)
11    Author

</pre>
</div></div>
<h2 id="StrutsCatalogMultipleButtonSolutions-UniversalButtonSolutions">Universal Button Solutions</h2>

<p>There is a persistent problem in web applications in handling multiple buttons, and this is especially a problem when the buttons are images.  </p>


<p>Struts has provided a solution for this with <a class="unresolved" href="#">DispatchAction</a> and its progeny.  I have found this solution to be too heavy, too complicated, and too obtuse.  So, I have engendered my own.</p>


<p>The principle reason for this class is the problem with &lt;input type='image' name='whatever'&gt; tags in HTML.  Those tag send the values in the name attribute as <em>whatever.x=9</em> and <em>whatever.y=26</em>.  <a class="unresolved" href="#">DispatchAction</a> and its progeny provide a melange of solutions but no common way to deal with <em>&lt;a href='whatever.do'&gt;</em>, <em>&lt;input type='submit'&gt;</em>, <em>&lt;input type='image'&gt;</em>, <em>&lt;input type='file'&gt;</em>, or whatever.  This class, <a class="unresolved" href="#">DispatchUtil</a> does that.  If you prefer to use a subclass, just provide the functionality in this class in a class extending Action.  Herbert Rabago came up with the idea of providing the functionality in a utility class and I really like that idea.  So, here we go.</p>

<h2 id="StrutsCatalogMultipleButtonSolutions-Uses">Uses</h2>

<p><strong>N.B. the uses of &quot;dispatch&quot;.</strong>  If you do not like using &quot;dispatch&quot;, then you can rewrite the code in the getMethodName(...) method.  Essentially, you will need to replace &quot;.dispatch&quot; with something else in the tag names which you can identify in the enumeration.  You have to use a suffix with this logic. But, if you want a prefix, e.g. &quot;dispatch.update&quot; or &quot;method.update&quot;, then you will have to change the logic too.  Suffix logic seems to best fit the existing methods in String.  Otherwise, I would have used a prefix.  You may want to anyway.</p>

<h3 id="StrutsCatalogMultipleButtonSolutions-ActionClassCodetoUse">Action Class Code to Use</h3>

<p>In all the following tag uses, you use the Action class code in execute(...) or process(...) as given directly below.</p>

<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>  ActionForward = forward = new DispatchUtil().dispatch(this,mapping,form,request,response);
</pre>
</div></div>

<h3 id="StrutsCatalogMultipleButtonSolutions-MultipleImageTags">Multiple Image Tags</h3>

<p>Multiple image tags are the primary reason for this class.  Integrating this into a common solution is the difficulty.</p>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>&lt;input type='image' name='update.dispatch' src='update.gif'&gt;
&lt;input type='image' name='delete.dispatch' src='delete.gif'&gt;
</pre>
</div></div>
<h3 id="StrutsCatalogMultipleButtonSolutions-LinkTags">Link Tags</h3>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>&lt;a href='profile.do?update.dispatch=whatever'&gt;
&lt;a href='profile.do?delete.dispatch=whatever'&gt;
</pre>
</div></div>
<h3 id="StrutsCatalogMultipleButtonSolutions-SubmitTags">Submit Tags</h3>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>&lt;input type='submit' name='update.dispatch' value='whatever'&gt;
&lt;input type='submit' name='delete.dispatch' value='whatever'&gt;
</pre>
</div></div>
<h3 id="StrutsCatalogMultipleButtonSolutions-FileBrowseTags">File Browse Tags</h3>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>&lt;input type='file' name='update.dispatch'&gt;
&lt;input type='file' name='delete.dispatch'&gt;
</pre>
</div></div>
<h3 id="StrutsCatalogMultipleButtonSolutions-ButtonTags">Button Tags</h3>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>&lt;input type='button' name='update.dispatch' value='whatever'&gt;
&lt;input type='button' name='delete.dispatch' value='whatever'&gt;
</pre>
</div></div>
<h3 id="StrutsCatalogMultipleButtonSolutions-struts-config.xmlUses">struts-config.xml Uses</h3>

<p>If you like to do things the way they are done with <a class="unresolved" href="#">DispatchActions</a> and use Struts xml for commands, then the following are possibilities.  <strong>Please note that you never have to do this.  Struts xml configuration is wholly voluntary for this solution.</strong>  If you want the sort of behavior you get with <a class="unresolved" href="#">MappingDispatchAction</a> using <a class="unresolved" href="#">DispatchUtil</a>, then you do as we indicate.  This does not mean, of course, that you have to use <a class="unresolved" href="#">MappingDispatchAction</a>.  <a class="unresolved" href="#">DispatchUtil</a> completely absorbs all the functionality of the <a class="unresolved" href="#">DispatchActions</a>.  You will see, further, that no struts-config.xml configuration is required at all for <a class="unresolved" href="#">LookupDispatchActions</a>.</p>

<h4 id="StrutsCatalogMultipleButtonSolutions-MappingDispatchAction#"><a class="unresolved" href="#">MappingDispatchAction</a></h4>

<p>This solution depends not on the value of the name attributes in the html tags, but strictly on the value of the path attributes in the html tags, anytime /updateProfile.do is called in the example below, any name attributes will be overridden and the value of the <a href="actionmapping.html">ActionMapping</a> property called &quot;parameter&quot; will be operative instead.</p>

<p>{{{&lt;action path=&quot;/updateProfile&quot; <br>
          type=&quot;org.example.ProfileAction&quot; <br>
          parameter=&quot;update.dispatch&quot;<br>
          name=&quot;profileForm&quot; <br>
          validate=&quot;true&quot; <br>
          input=&quot;/editProfile.jsp&quot; <br>
          scope=&quot;request&quot;&gt;<br>
      &lt;forward name=&quot;success&quot; path=&quot;/updatedProfile.jsp&quot;/&gt;<br>
  &lt;/action&gt;</p>

<p>  &lt;action path=&quot;/deleteSubscription&quot; <br>
          type=&quot;org.example.ProfileAction&quot;<br>
          name=&quot;profileForm&quot;<br>
          scope=&quot;request&quot;<br>
          input=&quot;/subscription.jsp&quot;<br>
          parameter=&quot;delete.dispatch&quot;&gt;<br>
      &lt;forward name=&quot;success&quot; path=&quot;/deletedSubscription.jsp&quot;/&gt;<br>
  &lt;/action&gt;<br>
}}}</p>
<h4 id="StrutsCatalogMultipleButtonSolutions-LookupDispatchAction"><a href="lookupdispatchaction.html">LookupDispatchAction</a></h4>

<p>This solution depends not on the value of the path attribute or the parameter property in the <a href="actionmapping.html">ActionMapping</a>, notice that no parameter attribute exists below, but strictly on the values of the name attributes as indicated in our section on the tags.  In other words, we don't have to configure struts-config.xml for what used to be <a class="unresolved" href="#">LookupDispatchActions</a>.</p>

<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>&lt;action path=&quot;/updateProfile&quot; 
          type=&quot;org.example.ProfileAction&quot; 
          name=&quot;profileForm&quot; 
          validate=&quot;true&quot; 
          input=&quot;/editProfile.jsp&quot; 
          scope=&quot;request&quot;&gt;
      &lt;forward name=&quot;success&quot; path=&quot;/updatedProfile.jsp&quot;/&gt;
  &lt;/action&gt;

  &lt;action path=&quot;/deleteSubscription&quot; 
          type=&quot;org.example.ProfileAction&quot;
          name=&quot;profileForm&quot;
          scope=&quot;request&quot;
          input=&quot;/subscription.jsp&quot;
      &lt;forward name=&quot;success&quot; path=&quot;/deletedSubscription.jsp&quot;/&gt;
  &lt;/action&gt;
</pre>
</div></div>

<h2 id="StrutsCatalogMultipleButtonSolutions-SOLUTONONE:SolutionCode">SOLUTON ONE: <a class="unresolved" href="#">DispatchUtil</a> Solution Code</h2>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>package com.crackwillow.struts.util.dispatch;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Enumeration;
import java.util.HashMap;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;
import org.apache.struts.util.MessageResources;

public class DispatchUtil {
  protected static    Log              log      = LogFactory.getLog(DispatchUtil.class);
  protected static    MessageResources messages = MessageResources.getMessageResources (&quot;org.apache.struts.actions.LocalStrings&quot;);
  protected           HashMap          methods  = new HashMap();
  protected           Class []         types    = { ActionMapping.class,
						    ActionForm.class,
						    HttpServletRequest.class,
						    HttpServletResponse.class };

  public ActionForward dispatch(Action action,
	                        ActionMapping mapping,
				ActionForm form,
                                HttpServletRequest request,
				HttpServletResponse response)
			throws Exception {
    String methodName  = getMethodName(request,mapping);
    Class  clazz       = action.getClass();
    if (&quot;execute&quot;.equals(methodName) || &quot;perform&quot;.equals(methodName)){
      // Prevent recursive calls
      String message = messages.getMessage(&quot;dispatch.recursive&quot;, mapping.getPath());
      log.error(message);
      throw new ServletException(message);
    }
    return dispatchMethod(action,clazz,mapping, form, request, response, methodName);
  }

  protected ActionForward dispatchMethod(Action action,
		                         Class clazz,
		                         ActionMapping mapping,
					 ActionForm form,
                                         HttpServletRequest request,
					 HttpServletResponse response,
					 String name)
			throws Exception {
    if (name == null) {
      return this.unspecified(mapping, form, request, response);
    }

    Method method = null;

    try {
      method = getMethod(clazz,name);
    } catch(NoSuchMethodException nsme) {
      String message = messages.getMessage(&quot;dispatch.method&quot;, mapping.getPath(), name);
      log.error(message, nsme);
      throw nsme;
    }

    ActionForward forward = null;

    try {
      Object args[] = { mapping, form, request, response };
      forward = (ActionForward)method.invoke(action, args);
    } catch(ClassCastException cce) {
      String message = messages.getMessage(&quot;dispatch.return&quot;, mapping.getPath(), name);
      log.error(message, cce);
      throw cce;
    } catch(IllegalAccessException iae) {
      String message = messages.getMessage(&quot;dispatch.error&quot;, mapping.getPath(), name);
      log.error(message, iae);
      throw iae;
    } catch(InvocationTargetException ite) {
      Throwable t = ite.getTargetException();
      if (t instanceof Exception) {
        throw ((Exception) t);
      } else {
        String message = messages.getMessage(&quot;dispatch.error&quot;, mapping.getPath(), name);
        log.error(message, ite);
        throw new ServletException(t);
      }
    }
    return (forward);
  }

  protected static String getMethodName(HttpServletRequest request,  ActionMapping mapping) {
    String methodName  = null;
    String buttonValue = null;
    String paramProperty = mapping.getParameter();
    if((paramProperty != null)) {
      methodName = paramProperty.substring(0,paramProperty.indexOf('.'));
    } else {
      Enumeration enum = request.getParameterNames();
      while(enum.hasMoreElements()) {
        buttonValue = (String)enum.nextElement();
	StdOut.log(&quot;log.dispatch&quot;,&quot;DispatchUtil buttonValue = &quot; + buttonValue);
	if(buttonValue.indexOf(&quot;.dispatch&quot;) &gt;= 0) {
	  methodName = buttonValue;
	  break;
        }
      }
    }
    return methodName.substring(0,methodName.indexOf('.'));
  }

  protected Method getMethod(Class clazz,String name)
      throws NoSuchMethodException {
    synchronized(methods) {
      Method method = (Method) methods.get(name);

      if (method == null) {
        method = clazz.getMethod(name, types);
        methods.put(name, method);
      }

      return (method);
    }
  }

  protected ActionForward unspecified(ActionMapping mapping,
				      ActionForm form,
				      HttpServletRequest request,
				      HttpServletResponse response)
			throws Exception {
    String message = messages.getMessage( &quot;dispatch.parameter&quot;, mapping.getPath(), getMethodName(request,mapping));
    log.error(message);

    throw new ServletException(message);
  }
}
</pre>
</div></div> 

<h2 id="StrutsCatalogMultipleButtonSolutions-(new)">(new) <a class="unresolved" href="#">DispatchAction</a></h2>

<h3 id="StrutsCatalogMultipleButtonSolutions-Discussion">Discussion</h3>

<p>If, rather than having a utility class provide the functionality, you prefer an Action class.  Here is a redoing of the <a class="unresolved" href="#">DispatchAction</a> class to let you do that.  You use this class for <strong>ALL</strong> the progeny of <a class="unresolved" href="#">DispatchAction</a> class, i.e. this class replaces completely <a class="unresolved" href="#">DispatchAction</a>, <a href="lookupdispatchaction.html">LookupDispatchAction</a>, and <a class="unresolved" href="#">MappingDispatchAction</a>.  You can alter this class to get whatever subsidiary functionality you might want and which some might consider essential.</p>

<h3 id="StrutsCatalogMultipleButtonSolutions-SOLUTIONTWO:(new)SolutionCode">SOLUTION TWO: (new) <a class="unresolved" href="#">DispatchAction</a> Solution Code</h3>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>package com.crackwillow.struts.action;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Enumeration;
import java.util.HashMap;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;
import org.apache.struts.util.MessageResources;

public abstract class DispatchAction
    extends Action {
  protected           Class            clazz    = this.getClass();
  protected static    Log              log      = LogFactory.getLog(SimpleDispatchAction.class);
  protected static    MessageResources messages = MessageResources.getMessageResources (&quot;org.apache.struts.actions.LocalStrings&quot;);
  protected           HashMap          methods  = new HashMap();
  protected           Class[]          types    = { ActionMapping.class,
                                                    ActionForm.class,
                                                    HttpServletRequest.class,
                                                    HttpServletResponse.class };

  public ActionForward execute(ActionMapping mapping,
                               ActionForm form,
                               HttpServletRequest request,
                               HttpServletResponse response)
      throws Exception {
    String name = getMethodName(request,mapping);

    if (&quot;execute&quot;.equals(name) || &quot;perform&quot;.equals(name)){
      // Prevent recursive calls
      String message = messages.getMessage(&quot;dispatch.recursive&quot;, mapping.getPath());
      log.error(message);
      throw new ServletException(message);
    }

    return dispatchMethod(mapping, form, request, response, name);
  }

  protected ActionForward dispatchMethod(ActionMapping mapping,
                                         ActionForm form,
                                         HttpServletRequest request,
                                         HttpServletResponse response,
                                         String name)
      throws Exception {

    if (name == null) {
      return this.unspecified(mapping, form, request, response);
    }

    Method method = null;

    try {
      method = getMethod(name);
    } catch(NoSuchMethodException nsme) {
      String message = messages.getMessage(&quot;dispatch.method&quot;, mapping.getPath(), name);
      log.error(message, nsme);
      throw nsme;
    }

    ActionForward forward = null;

    try {
      Object args[] = {mapping, form, request, response};
      forward = (ActionForward) method.invoke(this, args);
    } catch(ClassCastException cce) {
      String message = messages.getMessage(&quot;dispatch.return&quot;, mapping.getPath(), name);
      log.error(message, cce);
      throw cce;
    } catch(IllegalAccessException iae) {
      String message = messages.getMessage(&quot;dispatch.error&quot;, mapping.getPath(), name);
      log.error(message, iae);
      throw iae;

    } catch(InvocationTargetException ite) {
      Throwable t = ite.getTargetException();

      if (t instanceof Exception) {
        throw ((Exception) t);
      } else {
        String message = messages.getMessage(&quot;dispatch.error&quot;, mapping.getPath(), name);
        log.error(message, ite);
        throw new ServletException(t);
      }
    }
    return (forward);
  }

  protected static String getMethodName(HttpServletRequest request,  ActionMapping mapping) {
    String methodName  = null;
    String buttonValue = null;
    String paramProperty = mapping.getParameter();
    if((paramProperty != null)) {
      methodName = paramProperty.substring(0,paramProperty.indexOf('.'));
    } else {
      Enumeration enum = request.getParameterNames();
      while(enum.hasMoreElements()) {
        buttonValue = (String)enum.nextElement();
        StdOut.log(&quot;log.dispatch&quot;,&quot;DispatchUtil buttonValue = &quot; + buttonValue);
        if(buttonValue.indexOf(&quot;.dispatch&quot;) &gt;= 0) {
          methodName = buttonValue;
          break;
        }
      }
    }
    return methodName.substring(0,methodName.indexOf('.'));
  }

  protected Method getMethod(String name)
      throws NoSuchMethodException {
    synchronized(methods) {
      Method method = (Method) methods.get(name);

      if (method == null) {
        method = clazz.getMethod(name, types);
        methods.put(name, method);
      }

      return (method);
    }
  }

  protected ActionForward unspecified(ActionMapping mapping,
                                      ActionForm form,
                                      HttpServletRequest request,
                                      HttpServletResponse response)
      throws Exception {
    String message = messages.getMessage( &quot;dispatch.parameter&quot;, mapping.getPath(), getMethodName(request,mapping));
    log.error(message);

    throw new ServletException(message);
  }

  protected ActionForward cancelled(ActionMapping mapping,
                                    ActionForm form,
                                    HttpServletRequest request,
                                    HttpServletResponse response)
      throws Exception {

    return null;
  }
}
</pre>
</div></div>

<h2 id="StrutsCatalogMultipleButtonSolutions-POJO:SolutionforTagswithoutDispatch,withoutReflection,withoutorEvenwithoutStruts">POJO: Solution for Tags without Dispatch, without Reflection, without <a href="actionmapping.html">ActionMapping</a> or Even without Struts</h2>

<h3 id="StrutsCatalogMultipleButtonSolutions-Discussion.1">Discussion</h3>

<p>You can use the same strategy to determine what button tag has been clicked without employing Struts.  The best way to do this, in my opinion, in the following solution.</p>

<h3 id="StrutsCatalogMultipleButtonSolutions-SOLUTIONTHREE:SolutionCode">SOLUTION THREE: <a class="unresolved" href="#">ButtonTagUtil</a> Solution Code</h3>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>public class ButtonTagUtil {
  public static String getName(HttpServletRequest request) {
    String methodName  = null;
    String buttonValue = null;
    Enumeration enum = request.getParameterNames();
    while(enum.hasMoreElements()) {
      buttonValue = (String)enum.nextElement();
      if(buttonValue.indexOf(&quot;.dispatch&quot;) &gt;= 0) {
        methodName = buttonValue;
        break;
      }
    }
    return methodName.substring(0,methodName.indexOf('.'));
  }
}
</pre>
</div></div>

<h2 id="StrutsCatalogMultipleButtonSolutions-ButtonForm#"><a class="unresolved" href="#">ButtonForm</a></h2>
<p>Note that this solution does not use &quot;.dispatch&quot; and is not tied to Struts</p>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>&lt;input type='image' name='update' src='update.gif'&gt;
&lt;input type='image' name='delete' src='delete.gif'&gt;
</pre>
</div></div>
<h3 id="StrutsCatalogMultipleButtonSolutions-Discussion.2">Discussion</h3>
<p>This solution is for &lt;input type='image'&gt; only.  The other cases, of course, do not pose special problems with determining which button was clicked.  This solution is superior to the Button solution which follows because only one button object has to be created.  If you use buttons for navigation extensively within large forms, this because crucial.</p>
<h3 id="StrutsCatalogMultipleButtonSolutions-SOLUTIONFOUR:Code">SOLUTION FOUR: <a class="unresolved" href="#">ButtonForm</a> Code</h3>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>public class ButtonForm
    extends ActionForm {
  protected CrackWillowButton button;
  protected String command;

  public CrackWillowButton getButton() {
    if(button == null) { this.button = new CrackWillowButton(); }
    return button;
  }

  public String getCommand() {
    String hold = command; command = null;
    return hold;
  }

  public void reset() {
    button = null;
  }

  public class CrackWillowButton {
    private Integer x, y;
    public CrackWillowButton() { }
    public CrackWillowButton getSubmit() { command = &quot;submit&quot;;    return button; }
    public CrackWillowButton getClear()  { command = &quot;clear&quot;;    return button; }

    public void setX(Integer x) {
      if(y != null) { reset(); }
      else          { this.x = x; }
    }

    public void setY(Integer y) {
      if(x != null) { reset(); }
      else          { this.y = y; }
    }
  }
} ///;-) 
</pre>
</div></div>
<h2 id="StrutsCatalogMultipleButtonSolutions-Button">Button</h2>
<p>This solution, too, is only for &lt;input type='image'&gt;</p>
<h3 id="StrutsCatalogMultipleButtonSolutions-Discussion.3">Discussion</h3>
<p>This solution is as objectionable to me as (old) <a class="unresolved" href="#">DispatchAction</a> in Struts and its progeny, <a class="unresolved" href="#">MappingDispatchAction</a> and <a href="lookupdispatchaction.html">LookupDispatchAction</a>.  However, it is the first solution I proposed on this wiki, so I am putting it in here as a quasi-historical brain matter for those with quasi-hysterical brain matter.</p>
<h3 id="StrutsCatalogMultipleButtonSolutions-SOLUTIONFIVE:ButtonCode">SOLUTION FIVE: Button Code</h3>
<p>First we have the button:</p>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>public final class ButtonCommand {
  private ButtonCommand() {
  }

  public final static String getCommand(HttpServletRequest request) {
    Enumeration enum = request.getParameterNames();
    String parameterName = null;
    while(enum.hasMoreElements()) {
      parameterName = (String)enum.nextElement();
      if(parameterName.endsWith(&quot;.x&quot;)) {
        return parameterName.substring(0,parameterName.indexOf('.'));
      }
    }
    return parameterName;
  }
}
</pre>
</div></div>
<p>Then we have the form:</p>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>public class ButtonForm
    extends ActionForm {
  protected CrackWillowButton button;
  protected String command;

  public CrackWillowButton getButton() {
    if(button == null) { this.button = new CrackWillowButton(); }
    return button;
  }

  public String getCommand() {
    String hold = command; command = null;
    return hold;
  }

  public void reset() {
    button = null;
  }

  public class CrackWillowButton {
    private Integer x, y;
    public CrackWillowButton() { }
    public CrackWillowButton getSubmit() { command = &quot;submit&quot;;    return button; }
    public CrackWillowButton getClear()  { command = &quot;clear&quot;;    return button; }

    public void setX(Integer x) {
      if(y != null) { reset(); }
      else          { this.x = x; }
    }

    public void setY(Integer y) {
      if(x != null) { reset(); }
      else          { this.y = y; }
    }
  }
} ///;-) 
</pre>
</div></div>
<p>In the Action class, we check out which button type has been pressed as follows:</p>
<div class="preformatted panel conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="noformat"><div class="preformattedContent panelContent">
<pre>  String command = buttonForm.getCommand();
  if(&quot;submit&quot;.equals(command)) {
    // do whatever
  } else if (&quot;clear&quot;.equals(command)) {
    // do whatever
  } else {
    // some assert code
  }
</pre>
</div></div>

<h2 id="StrutsCatalogMultipleButtonSolutions-Links">Links</h2>

<p><a href="strutscataloginstrumentableforms.html">StrutsCatalogInstrumentableForms</a></p>


<p><a href="strutscatalogmappedbeans.html">StrutsCatalogMappedBeans</a></p>

<p><a href="strutscataloghidingimagesandothe.html">StrutsCatalogHidingImagesAndOtherResourcesUnderWEBINF</a></p>
<h2 id="StrutsCatalogMultipleButtonSolutions-Comments">Comments</h2>

<p><a href="commentpageforcritiques.html">CommentPageForCritiques</a></p>

<p>Thank you for using the above link for comments instead of this page, since there is no easy way to accommodate everyone's style in one place.</p>

<h2 id="StrutsCatalogMultipleButtonSolutions-AUTHOR">AUTHOR</h2>


<p>If you have any questions contact me at mike@michaelmcgrady.com .</p>


<p><strong>Michael McGrady</strong></p>


<p>If your comments are extensive, you might want to provide a link instead of adding to this already incredibly verbose presentation.</p>

                
        
    
        </div>

                        
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="120724388" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            <li class="no-labels-message">
            无标签
        </li>
            </ul>

    </div>
</div>
</div>
        
		
            




            
        








                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>
        


                
    
            
</div>

    

    




    
    

    
    
    


    
<div id="space-tools-web-items" class="hidden">
                <div data-label="概览" data-href="/confluence/spaces/viewspacesummary.action?key=WW">概览</div>
            <div data-label="内容工具" data-href="/confluence/pages/reorderpages.action?key=WW">内容工具</div>
            <div data-label="应用" data-href="/confluence/spaces/snippeterrors.action?key=WW">应用</div>
    </div>
        



            </div><!-- \#main -->
            
    
    
        
            
            

<div id="footer" role="contentinfo">
    <section class="footer-body">

                                                            <p class="license license-opensource">
                    本站点免费授予 Apache Software Foundation<b> Atlassian Confluence 开源项目授权</b>。<a href="javascript:;">今天开始评估 Confluence</a>。<br>
                </p>
                    
        

        <ul id="poweredby">
            <li class="noprint">基于 <a href="javascript:;" class="hover-footer-link" rel="nofollow">Atlassian Confluence</a> <span id='footer-build-information'>7.5.0</span> 技术构建</li>
            <li class="print-only">由 Atlassian 合流7.5.0 打印</li>
            <li class="noprint"><a href="javascript:;" class="hover-footer-link" rel="nofollow">报告缺陷</a></li>
            <li class="noprint"><a href="javascript:;" class="hover-footer-link" rel="nofollow">Atlassian 新闻</a></li>
        </ul>

        

        <div id="footer-logo"><a href="javascript:;" rel="nofollow">Atlassian</a></div>

                    
        
    </section>
</div>

    
</div>

</div><!-- \#full-height-container -->
</div><!-- \#page -->

    <span style="display:none;" id="confluence-server-performance">{"serverDuration": 167, "requestCorrelationId": "8174a86f8f56d9d7"}</span>
</body>
</html>
    
